@page
@model MyApp.Namespace.RegisterModel
@{
}

<head>
    <title>Table4U | Register</title>

	<script src="js/jquery.js"></script>

</head>
<div id="bi-registration-successful"class="modal">
<div class="modal-content reg-succ">

<div><label>Registration successful</label></div>

</div>
</div>
<label  id="login-successful" style="display: none;">@Model.loginSuccessful</label>
<div class="content">
	<div class="main">
	   <div class="container">
		  <div class="register">
		  	  <form id="signupForm" method="post" action=""> 
				 <div class="register-top-grid">
					<h3>PERSONAL INFORMATION</h3>
					 <div class="wow fadeInLeft" data-wow-delay="0.4s">
						<span>First Name<label>*</label></span>
						<input asp-for="firstname" type="text" id="firstname" name="firstname"  >
						<label class="error" style="visibility: hidden;">This field is required.</label>
					 </div>
					 <div class="wow fadeInRight" data-wow-delay="0.4s">
						<span>Last Name<label>*</label></span>
						<input asp-for="lastname" type="text"  id="lastname" name="lastname" >
							<label class="error" style="visibility: hidden;">This field is required.</label>
					 </div>
				    
					 <div class="wow fadeInRight" id="register-form-email-c" data-wow-delay="0.4s">
						 <span>Email Address<label>*</label></span>
						 <input asp-for="email" id="email" name="email" type="text" > 
						 	<label class="error error-hidden" style="visibility: hidden;">This field is required.</label>
						 <label id="adressTaken">@Model.ErrorMessage</label>
					 </div>



					 <div class="clearfix"> </div>
					   <a class="Business" href="#">
						   <script src="js/validateEmail.js"></script>
						  <script>
							  window.onload=()=>
							  {			let errmsg=document.querySelector("#register-form-email-c").querySelectorAll("label")[2];
							 		
								  if(errmsg.innerHTML=="This email address is already used")
								  {
									document.querySelector("#email").onfocus=()=>{ errmsg.innerHTML="";}
								  }
							  }
							  function isNullOrWhitespace( input ) {

    						if (typeof input === 'undefined' || input == null) return true;
							let p=input.replace(/\s/g, '').length < 1;
	
	
   							 return p;
							}
							  function emailError()
					{
						let email=document.querySelector("#email");
						if(validateEmail(email.value))
						{
							email.parentElement.querySelector(".error").style.visibility="hidden";
							return false;
						}
						else
						{
							
							email.parentElement.querySelector(".error").style.visibility="visible";
							return true;
						}
					}
					function passwordError(passID)
					{
						let pass=document.querySelector("#password");
						let cpass=document.querySelector("#confirm_password");
						if(document.querySelector("#"+passID).value==""||document.querySelector("#"+passID).value.length<5)
						{	
							document.querySelector("#"+passID).parentElement.querySelector(".error").innerHTML="Password must be at least 5 characters long";	
							document.querySelector("#"+passID).parentElement.querySelector(".error").style.visibility="visible";
							
							return true;
						}
						
						else 
						if(pass.value!=cpass.value)
						{
							document.querySelector("#"+passID).parentElement.querySelector(".error").innerHTML="Passwords do not match";	
							document.querySelector("#"+passID).parentElement.querySelector(".error").style.visibility="visible";
							
							return true;
						}
						
						else
						{
							pass.parentElement.querySelector(".error").innerHTML="Password must be at least 5 characters long";	
						    pass.parentElement.querySelector(".error").style.visibility="hidden";
							cpass.parentElement.querySelector(".error").innerHTML="Password must be at least 5 characters long";	
						    cpass.parentElement.querySelector(".error").style.visibility="hidden";
							
							
							return false;

						}


					}
					function nameError(inputId)
					{
							let name=document.querySelector("#"+inputId);
						if(name.value==""||isNullOrWhitespace(name.value))
						{
							
							name.parentElement.querySelector(".error").style.visibility="visible";
							name.parentElement.querySelector(".error").style.display="block";
							return true;
						}
						else
						{
							name.parentElement.querySelector(".error").style.visibility="hidden";
							
							return false;
						}
					}
						document.addEventListener("DOMContentLoaded", function validateRegisterForm(event){
							
							
							if(document.querySelector("#login-successful").innerHTML!="-")
								{
									document.querySelector("#bi-registration-successful").style.display="block";
									setTimeout(()=>{window.location.href="/Index";},2500);
									
								}
					
							let element=document.querySelector("#firstname");
					element.onfocus=function()
					{	
						this.onblur=()=>{ nameError("firstname");}
					}
					element.oninput=function(e)
					{
						nameError("firstname");
					}  
					element=document.querySelector("#lastname");
					element.onfocus=function()
					{	
						this.onblur=()=>{ nameError("lastname");}
					}
					element.oninput=function(e)
					{
						nameError("lastname");
					}  
					element=document.querySelector("#email");
					element.onfocus=function()
					{	
						this.onblur=()=>{ emailError();}
					}
					element.oninput=function(e)
					{
						emailError();
						element.parentElement.querySelectorAll("label")[1].style.display="none";
					}  
					element=document.querySelector("#password");
					element.onfocus=function()
					{	
						this.onblur=()=>{ passwordError("password");}
					}
					element.oninput=function(e)
					{
						passwordError("password");
					}  
					element=document.querySelector("#confirm_password");
					element.onfocus=function()
					{	
						this.onblur=()=>{ passwordError("confirm_password");}
					}
					element.oninput=function(e)
					{
						passwordError("confirm_password");
					}  
					document.querySelector("#signupForm").onsubmit=()=>
					{

						
						
						let error=false;
						if(nameError("firstname"))
						error=true;
					
						if(nameError("lastname"))
						error=true;
						
						if(emailError())
						error=true;
						
						if(passwordError("password"))
						error=true;
					
						if(passwordError("confirm_password"))
						error=true;
						if(error)
						{
						
						return false;
						}
						return true;

						
					}
					});

							  
							  
							  function changeRegisterButtonText()
						{
	   					 if(document.querySelector(".Business input").checked)
       					 {
								document.querySelector(".register-but").innerHTML="Next";
							
							
						 }
      					  else 
							{
								 document.querySelector(".register-but").innerHTML="Submit"
								
							}
      					 
						}
						</script>
						 <label class="checkbox"><input type="checkbox" name="wantBusiness" value="Business" onclick="changeRegisterButtonText()"><i> </i><label class="register-cb-label">Create business account, I want to advertise my restaurant</label></label>
						
					   </a>
					 </div> 
				     <div class="register-bottom-grid">
						    <h3>LOGIN INFORMATION</h3>
							 <div class="wow fadeInLeft" data-wow-delay="0.4s">
								<span>Password<label>*</label></span>
								<input type="password" asp-for="password" id="password" name="password" >
								<label class="error" style="visibility: hidden;">This field is required.</label>
							 </div>
							 <div class="wow fadeInRight" data-wow-delay="0.4s">
								<span>Confirm Password<label>*</label></span>
								<input type="password" asp-for="confirmPassword" id="confirm_password" name="confirm_password" >
								<label class="error" style="visibility: hidden;">This field is required.</label> 
							 </div>
					 </div>
					
					
					<div class="clearfix"> </div>
					<button type="submit" class="register-but">submit</button>
					<div class="clearfix"> </div>
					
				</form>
				<!--<div class="clearfix"> </div>
				<div class="register-but">
				   <form>
					   <input type="submit" value="submit">
					   <div class="clearfix"> </div>
				   </form>
				</div>-->
				
		   </div>
	     </div>
	    </div>

<div class="clearfix"></div>
		<div class="contact-section" id="contact">
			<div class="container">
				<div class="contact-section-grids">
					<div class="col-md-3 contact-section-grid">
						<h4>Site Links</h4>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">About Us</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Contact Us</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Privacy Policy</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Terms of Use</a></li>
						</ul>
					</div>
					<div class="col-md-3 contact-section-grid">
						<h4>Site Links</h4>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">About Us</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Contact Us</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Privacy Policy</a></li>
						</ul>
						<ul>
							<li><i class="point"></i></li>
							<li class="data"><a href="#">Terms of Use</a></li>
						</ul>
					</div>
					<div class="col-md-3 contact-section-grid">
						<h4>Follow Us On...</h4>
						<ul>
							<li><i class="fb"></i></li>
							<li class="data"> <a href="#">  Facebook</a></li>
						</ul>
						<ul>
							<li><i class="tw"></i></li>
							<li class="data"> <a href="#">Twitter</a></li>
						</ul>
						<ul>
							<li><i class="in"></i></li>
							<li class="data"><a href="#"> Linkedin</a></li>
						</ul>
						<ul>
							<li><i class="gp"></i></li>
							<li class="data"><a href="#">Google Plus</a></li>
						</ul>
					</div>
					<div class="col-md-3 contact-section-grid nth-grid">
						<h4>Subscribe Newsletter</h4>
						<p>To get latest updates and food deals every week</p>
						<input type="text" class="text" value="" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '';}">
						<input type="submit" value="submit">
						</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<!-- content-section-ends -->
    <!--<script type="text/javascript">
						$(document).ready(function() {
							/*
							var defaults = {
					  			containerID: 'toTop', // fading element id
								containerHoverID: 'toTopHover', // fading element hover id
								scrollSpeed: 1200,
								easingType: 'linear' 
					 		};
							*/
							
							$().UItoTop({ easingType: 'easeOutQuart' });
							
						});
					</script>
				<a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>-->
